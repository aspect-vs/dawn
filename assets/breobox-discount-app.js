function init(w,$){var d=$(".order-summary .summary-body");var e=$("#apply_discount");var f=$(".discount-delete");var g=$("#checkout_discount_code");if(e.length===0||g.length===0||d.length===0){console.log("noop: discount code form/button/summary not found");return}var h="https://intense-coast-90772.herokuapp.com";var i=h+"/check-discount";e.off("click").on("click",ebdevUpdateShipping);f.off("click").on("click",ebdevUpdateShipping);function checkDiscount(){if(!w.cart_json||!w.cart_json.token){console.warn("no checkout token found");return}$.ajax({type:"POST",timeout:10000,url:i,contentType:"application/json",data:JSON.stringify({token:w.cart_json.token,origin:w.location.origin,}),}).done(function(a,b,c){if(a&&a.url){w.location.replace(a.url);setTimeout(function(){d.removeClass("is-loading")},3000)}else{d.removeClass("is-loading")}}).fail(function(a,b,c){console.log("err:",b);console.error(c);d.removeClass("is-loading")})}function ebdevUpdateShipping(){d.addClass("is-loading");w.updateShipping(g.val(),false,checkDiscount)}}function defer(a){if(window.jQuery){a(window,window.jQuery)}else{setTimeout(function(){defer(a)},100)}}defer(init);